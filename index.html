<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" /> 
<title>Kuveyt Türk — واجهة مُحسّنة</title>

<link rel="icon" type="image/png" href="images/kuveyt-bank-icon.png">


<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800;900&display=swap" rel="stylesheet">
<style>
  :root{
    /* Kuveyt Türk Green Palette */
    --kuveyt-deep: #007A3E; /* Dark Green */
    --kuveyt-mid: #00994B; /* Main Green */
    --kuveyt-light: #F0FAF3; /* Light Background */
    --kuveyt-text: #1C1C1C;
    --kuveyt-gray: #f9f9f9; /* Off-White/Light Gray for sections */
    --shadow-color: rgba(0, 122, 62, 0.15);
  }
  html,body{
    height:100%;
    margin:0;
    font-family:"Tajawal", Arial, sans-serif;
    direction:rtl;
    background:var(--kuveyt-gray);
    color:var(--kuveyt-text);
    -webkit-font-smoothing:antialiased;
    box-sizing: border-box;
    /* منع التكبير التلقائي 2/3 */
    touch-action: manipulation;
  }
  *,*::before,*::after {
    box-sizing: inherit;
  }
  button{
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
    border: none;
  }
  button:active{
    transform: scale(0.98);
  }

  /* --- GLOBAL APP INTERFACE STYLES --- */
  #app-container {
    max-width: 420px;
    margin: 0 auto;
    background: #fff;
    min-height: 100vh;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
  }
  
  /* منع التكبير التلقائي 3/3 */
  input, select, textarea {
      font-size: 16px !important;
  }

  /* Fixed App Header/Top Bar */
  .app-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:14px 18px;
    background:#fff; 
    color:var(--kuveyt-deep);
    position: sticky;
    top: 0;
    z-index: 100;
    font-size: 16px;
    font-weight: 700;
  }
  .header-icon{
    background:none; border:none; color:#555; font-size:22px; cursor:pointer; padding: 4px; line-height: 1;
  }
  .icon-svg{
      width: 24px; height: 24px; vertical-align: middle;
      fill: currentColor;
  }
  .profile-section {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 14px;
    font-weight: 700;
    color: #444;
  }
  .profile-pic {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: var(--kuveyt-mid);
    border: 2px solid #ddd;
  }
  
  /* --- NEW: Info Bar --- */
  .info-bar {
      background: var(--kuveyt-light);
      color: var(--kuveyt-deep);
      padding: 10px 18px;
      font-size: 13px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
  }
  .info-bar .icon-svg {
      width: 16px; height: 16px; fill: var(--kuveyt-deep);
  }

  /* --- LOGIN SCREEN (Kuveytturk Style) --- */
  #login-screen{
    position:fixed; 
    inset:0; 
    display:flex; 
    flex-direction: column;
    align-items:center; 
    justify-content:center;
    background: linear-gradient(180deg, var(--kuveyt-mid) 0%, var(--kuveyt-deep) 100%);
    z-index:900;
    padding-top: 50px; /* Space for the logo/title */
  }

  .login-box{
    width:360px; max-width: 90%; 
    background:rgba(255,255,255,0.96); 
    padding:26px; 
    border-radius:14px;
    box-shadow:0 12px 40px rgba(0,0,0,.18); 
    text-align:center;
    /* Transition for switching forms */
    transition: opacity 0.3s ease-in-out;
  }
  .login-btn{
    width: 100%; padding:12px; border-radius:8px; border:none;
    background:var(--kuveyt-mid);
    color:#fff; font-weight:700; margin-top: 10px;
  }
  .login-input{
    width: 100%; padding:12px; border-radius:8px; border:1px solid #ddd; margin-top: 10px; text-align: right;
  }

  /* PIN Pad Styles */
  .pin-pad-container {
      width: 100%;
      max-width: 320px; 
      text-align: center;
      padding: 20px 0;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none; /* Hidden by default */
  }

  .pin-dots {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      height: 20px;
  }
  .pin-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.8);
      transition: background-color 0.2s ease-in-out;
  }
  .pin-dot.filled {
      background: #fff;
      border-color: #fff;
  }

  .pin-keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      width: 280px;
      margin: 0 auto;
  }

  .pin-key {
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      font-size: 24px;
      font-weight: 700;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.1s;
      margin: 0 auto;
      border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .pin-key:active {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(0.95);
  }
  .pin-key.empty {
      background: none;
      border: none;
      cursor: default;
  }
  .pin-key.backspace {
      font-size: 16px;
      border-radius: 0;
      border: none;
      width: auto;
      height: auto;
      color: rgba(255, 255, 255, 0.8);
      background: none;
  }
  .pin-key.backspace:active {
      background: none;
      transform: scale(0.98);
      color: #fff;
  }

  /* Text inside PIN Pad */
  .pin-header {
      color: #fff;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 25px;
  }
  .pin-welcome {
      color: #fff;
      font-size: 14px;
      margin-top: 10px;
      margin-bottom: 40px;
      font-weight: 400;
  }


  /* --- HOME VIEW SPECIFIC STYLES --- */
  .panel-view{
    display: none;
    min-height: calc(100vh - 70px);
    background: #fff;
  }
  .panel-active{
    display: block !important;
  }
  
  /* Account Balance Section (Primary Account Box) */
  .primary-account-box{
    background: #fff;
    padding: 10px 18px 10px;
  }
  .tab-bar {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
  }
  .tab-item {
      font-size: 16px;
      font-weight: 700;
      color: #999;
      padding-bottom: 4px;
      border-bottom: 2px solid transparent;
      cursor: pointer;
  }
  .tab-item.active {
      color: var(--kuveyt-deep);
      border-color: var(--kuveyt-deep);
  }
  
  /* --- NEW CARDS SECTION STYLES --- */
  .card-section-wrapper .card-container {
      background: var(--kuveyt-gray);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }
  .card-section-wrapper .card-details-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 0;
  }
  .card-section-wrapper .card-info-label {
      font-size: 0.9em;
      color: #777;
  }
  .card-section-wrapper .card-balance-tl {
      font-size: 1.2em;
      font-weight: 800;
      color: var(--kuveyt-deep);
      direction: ltr;
      text-align: left;
  }
  .card-section-wrapper .card-balance-usd {
      font-size: 1em;
      font-weight: 700;
      color: #4CAF50; /* لون مختلف للدولار هنا */
      direction: ltr;
      text-align: left;
  }


  .account-summary {
      background: var(--kuveyt-gray);
      padding: 18px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  }
  .account-header .icon-text {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      font-size: 14px;
  }
  .account-balance {
      font-size: 28px;
      font-weight: 900;
      color: var(--kuveyt-deep);
      text-align: right;
      direction: ltr;
  }
  .secondary-balance-text {
      font-size: 14px;
      color: #888;
      text-align: right;
      margin-top: -10px;
      margin-bottom: 10px;
  }
  .view-all-link {
      color: var(--kuveyt-deep);
      font-weight: 700;
      font-size: 14px;
      text-align: center;
      margin-top: 10px;
      display: block;
  }

  /* Quick Actions/Fast Transactions (2-column layout) */
  .fast-transactions-section {
    padding: 10px 18px;
  }
  .fast-transactions-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      font-size: 16px;
      font-weight: 700;
  }
  .fast-transactions-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  }
  .fast-transaction-item {
    background: var(--kuveyt-gray);
    padding: 15px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    color: #444;
    cursor: pointer;
  }
  .item-icon {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
  }

  /* --- EXCLUSIVE FOR YOU SECTION --- */
  .exclusive-section {
      padding: 15px 18px;
      border-top: 8px solid var(--kuveyt-gray);
  }
  .exclusive-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      font-size: 16px;
      font-weight: 700;
  }
  .exclusive-card {
      background: #fdfdfd;
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }
  .promo-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      justify-content: flex-end;
  }
  .btn-join {
      background: var(--kuveyt-mid);
      color: #fff;
      padding: 8px 15px;
      border-radius: 8px;
      font-weight: 700;
  }
  .btn-skip {
      background: #fff;
      color: #999;
      border: 1px solid #ddd;
      padding: 8px 15px;
      border-radius: 8px;
      font-weight: 700;
  }

  /* Card Section */
  .card-section-wrapper{
    padding: 15px 18px 25px;
    background: #fff;
  }
  .card-box-header {
      font-size: 16px;
      font-weight: 700;
      color: var(--kuveyt-deep);
      margin-bottom: 15px;
  }
  .miles-smiles-card {
    width: 100%;
    max-width: 380px;
    height: 200px;
    border-radius: 14px;
    padding: 16px;
    margin: 0 auto;
    position: relative;
    color: #fff;
    background: linear-gradient(135deg, #1C1C1C 0%, #3A3A3A 100%);
    box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-family: 'Consolas', 'Menlo', 'Monaco', monospace; 
    border: 1px solid #444;
  }

  /* --- Transaction Section (Enhanced) --- */
  .transactions-section{
    background: #fff;
    padding: 15px 18px 70px;
    border-top: 8px solid var(--kuveyt-gray);
  }
  .transactions-section h3{
    font-size: 16px;
    font-weight: 700;
    color: var(--kuveyt-text);
    margin-bottom: 15px;
  }
  .transaction-item{
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0; /* Increased padding */
    border-bottom: 1px solid #eee;
  }
  .transaction-item:last-of-type {
      border-bottom: none;
  }
  .tx-details-group {
      text-align: right;
  }
  .tx-title {
      font-weight: 700;
      color: #444;
  }
  .tx-amount{
    font-weight: 700;
    color: var(--kuveyt-deep);
    font-size: 16px; /* Slightly larger amount */
  }
  .tx-details{
    font-size: 13px;
    color: #666;
    margin-top: 2px;
  }
  
  /* --- PRIVATE BANKING CONTACT --- */
  .private-banking-section {
    padding: 15px 18px;
    border-top: 8px solid var(--kuveyt-gray);
  }
  .private-banking-section h3 {
      font-size: 14px;
      font-weight: 700;
      color: #444;
      margin-bottom: 10px;
  }
  .contact-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      padding: 10px 0;
  }
  .contact-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--kuveyt-light);
      border: 1px solid var(--kuveyt-mid);
      color: var(--kuveyt-mid);
      display: flex;
      align-items: center;
      justify-content: center;
  }
  
  /* --- Bottom Navigation Bar --- */
  .app-navbar{
    position: fixed;
    bottom: 0;
    width: 100%;
    max-width: 420px;
    background: #fff;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-around;
    padding: 8px 0;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
    z-index: 100;
  }
  .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 10px;
      font-weight: 700;
      cursor: pointer;
      padding: 4px 0;
      flex-grow: 1;
  }
  .nav-item-active {
      color: var(--kuveyt-deep);
  }
  .nav-icon-wrapper {
      margin-bottom: 2px;
  }
  .nav-item .icon-svg {
      width: 20px;
      height: 20px;
  }
  
  /* --- NEW: Splash Screen Styles (Palm Tree) --- */
  #splash-screen {
      position: fixed;
      inset: 0;
      display: none; /* يتم عرضه عن طريق JS */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #fff; 
      z-index: 1000; 
      /* ** التعديل المطلوب: حركة الاختفاء التدريجي ** */
      transition: opacity 0.5s ease-out; 
      opacity: 1;
  }
  .splash-logo {
      text-align: center;
      margin-bottom: 20px;
      width: 140px; 
      height: 140px;
      /* استخدام SVG كصورة خلفية */
      background-image: url('data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 160 160\'><rect width=\'160\' height=\'160\' fill=\'none\'/><g transform=\'translate(10, 10)\'><circle cx=\'70\' cy=\'70\' r=\'68\' fill=\'none\' stroke=\'%2347c699\' stroke-width=\'4\'/><circle cx=\'70\' cy=\'70\' r=\'68\' fill=\'rgba(71, 198, 153, 0.2)\'/><path fill=\'%2300994B\' d=\'M88.7,35.4c-1.8-0.9-3.7-1.4-5.6-1.4c-2.8,0-5.4,1.1-7.4,3.1c-1.9,1.9-2.9,4.4-2.9,7v39.5c0,1.3,0.3,2.5,0.9,3.6c0.6,1.1,1.5,2,2.6,2.6c1.1,0.6,2.4,0.9,3.7,0.9c1.3,0,2.5-0.3,3.6-0.9c1.1-0.6,2-1.5,2.6-2.6c0.6-1.1,0.9-2.3,0.9-3.6V44.1c0-0.7,0.1-1.3,0.3-1.8c0.2-0.5,0.5-0.9,0.9-1.3l17.4-17.4C90.2,23.3,89.5,23.3,88.7,35.4z\'/><path fill=\'%2300994B\' d=\'M111.4,49.1L94,66.5c-0.8,0.8-1.7,1.1-2.6,1.1c-1.8,0-3.5-0.7-4.8-2.1c-1.3-1.4-2-3.1-2-5.1c0-2.8,1.1-5.4,3.1-7.4c1.9-1.9,4.4-2.9,7-2.9c1.9,0,3.8,0.4,5.4,1.2l22.4,11.2C118.8,61.9,112.9,55.1,111.4,49.1z\'/><path fill=\'%2300994B\' d=\'M50,89.7L32.6,72.3c-0.8-0.8-1.7-1.1-2.6-1.1c-1.8,0-3.5,0.7-4.8,2.1c-1.3,1.4-2-3.1-2-5.1c0,2.8,1.1,5.4,3.1,7.4c1.9,1.9,4.4,2.9,7,2.9c1.9,0,3.8-0.4,5.4-1.2l22.4-11.2C57.4,76.9,51.5,83.7,50,89.7z\'/><path fill=\'%2300994B\' d=\'M70,140V82.7c0-2.8,1.1-5.4,3.1-7.4c1.9-1.9,4.4-2.9,7-2.9c1.9,0,3.8,0.4,5.4,1.2l-22.4,11.2C52.1,83.7,58,90.5,70,140z\'/><path fill=\'%2300994B\' d=\'M85.7,140V82.7c0-2.8,1.1-5.4,3.1-7.4c1.9-1.9,4.4-2.9,7-2.9c1.9,0,3.8,0.4,5.4,1.2l-22.4,11.2C82.1,83.7,88,90.5,85.7,140z\'/><rect x=\'75\' y=\'70\' width=\'10\' height=\'70\' fill=\'none\' stroke=\'%23007A3E\' stroke-width=\'1.5\' stroke-dasharray=\'8, 4\'/></g></svg>');
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
  }
  .splash-text {
      color: var(--kuveyt-mid); /* لون أخضر للنص */
      font-size: 20px; /* تم زيادة حجم الخط قليلاً */
      font-weight: 800; /* تم زيادة سماكة الخط */
      margin-top: 10px;
  }
  /* ** الفئة التي تُضاف للاختفاء ** */
  #splash-screen.fade-out {
      opacity: 0;
  }

  /* --- WELCOME SCREEN (New Initial Screen) --- */
  #welcome-screen {
      position: fixed;
      inset: 0;
      display: none; 
      flex-direction: column;
      align-items: center;
      background: #fff;
      z-index: 950; 
      padding: 50px 25px;
      justify-content: flex-start;
  }
  .welcome-content {
      width: 100%;
      text-align: right;
  }
  .welcome-logo {
      width: 50px;
      height: 50px;
      margin-bottom: 20px;
      /* استخدام نفس طريقة عرض الشعار الموثوقة */
      background-image: url('data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 160 160\'><rect width=\'160\' height=\'160\' fill=\'none\'/><g transform=\'translate(10, 10)\'><circle cx=\'70\' cy=\'70\' r=\'68\' fill=\'none\' stroke=\'%2347c699\' stroke-width=\'4\'/><circle cx=\'70\' cy=\'70\' r=\'68\' fill=\'rgba(71, 198, 153, 0.2)\'/><path fill=\'%2300994B\' d=\'M88.7,35.4c-1.8-0.9-3.7-1.4-5.6-1.4c-2.8,0-5.4,1.1-7.4,3.1c-1.9,1.9-2.9,4.4-2.9,7v39.5c0,1.3,0.3,2.5,0.9,3.6c0.6,1.1,1.5,2,2.6,2.6c1.1,0.6,2.4,0.9,3.7,0.9c1.3,0,2.5-0.3,3.6-0.9c1.1-0.6,2-1.5,2.6-2.6c0.6-1.1,0.9-2.3,0.9-3.6V44.1c0-0.7,0.1-1.3,0.3-1.8c0.2-0.5,0.5-0.9,0.9-1.3l17.4-17.4C90.2,23.3,89.5,23.3,88.7,35.4z\'/><path fill=\'%2300994B\' d=\'M111.4,49.1L94,66.5c-0.8,0.8-1.7,1.1-2.6,1.1c-1.8,0-3.5-0.7-4.8-2.1c-1.3-1.4-2-3.1-2-5.1c0-2.8,1.1-5.4,3.1-7.4c1.9-1.9,4.4-2.9,7-2.9c1.9,0,3.8,0.4,5.4,1.2l22.4,11.2C118.8,61.9,112.9,55.1,111.4,49.1z\'/><path fill=\'%2300994B\' d=\'M50,89.7L32.6,72.3c-0.8-0.8-1.7-1.1-2.6-1.1c-1.8,0-3.5,0.7-4.8,2.1c-1.3,1.4-2-3.1-2-5.1c0,2.8,1.1,5.4,3.1,7.4c1.9,1.9,4.4,2.9,7,2.9c1.9,0,3.8-0.4,5.4-1.2l22.4-11.2C57.4,76.9,51.5,83.7,50,89.7z\'/><path fill=\'%2300994B\' d=\'M70,140V82.7c0-2.8,1.1-5.4,3.1-7.4c1.9-1.9,4.4-2.9,7-2.9c1.9,0,3.8,0.4,5.4,1.2l-22.4,11.2C52.1,83.7,58,90.5,70,140z\'/><path fill=\'%2300994B\' d=\'M85.7,140V82.7c0-2.8,1.1-5.4,3.1-7.4c1.9-1.9,4.4-2.9,7-2.9c1.9,0,3.8,0.4,5.4,1.2l-22.4,11.2C82.1,83.7,88,90.5,85.7,140z\'/><rect x=\'75\' y=\'70\' width=\'10\' height=\'70\' fill=\'none\' stroke=\'%23007A3E\' stroke-width=\'1.5\' stroke-dasharray=\'8, 4\'/></g></svg>');
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
  }
  .welcome-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--kuveyt-deep);
      margin-bottom: 40px;
      text-align: left; 
      direction: ltr;
  }
  .welcome-button {
      width: 100%;
      padding: 16px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 15px;
      text-align: center;
  }
  .btn-giris {
      background: var(--kuveyt-mid);
      color: #fff;
  }
  .btn-musteri {
      background: #fff;
      color: #FF7043; 
      border: 1px solid #FF7043;
  }
  .welcome-actions-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      padding: 20px 0 0;
      margin-top: 50px;
      position: absolute; 
      bottom: 60px; 
      width: calc(100% - 50px); 
      max-width: 370px;
  }
  .action-box {
      background: #fdfdfd;
      border: 1px solid #eee;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      font-size: 11px;
      color: #444;
      height: 90px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
  }
  .action-box .icon-svg {
      width: 25px; height: 25px; fill: var(--kuveyt-mid);
  }
  
  /* --- LOGIN TABS SCREEN (Bireysel/Kurumsal) --- */
  #login-tabs-screen {
      position: fixed;
      inset: 0;
      display: none; 
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 50px;
      background: #fff;
      z-index: 960;
  }
  .login-tabs-header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 18px 20px;
      
  }
  .login-tabs-header h2 {
      font-size: 18px;
      font-weight: 700;
      color: #333;
      margin: 0;
  }
  .login-tabs-container {
      display: flex;
      width: calc(100% - 36px);
      margin: 0 18px;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 25px;
      background: #f0f0f0;
  }
  .login-tab {
      flex: 1;
      text-align: center;
      padding: 10px 0;
      font-weight: 700;
      color: #777;
      background: transparent;
      transition: background-color 0.3s;
      cursor: pointer;
  }
  .login-tab.active {
      background: #fff;
      color: var(--kuveyt-deep);
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
  }
  .login-input-field {
      width: calc(100% - 36px);
      margin: 0 18px 15px;
      padding: 12px 15px;
      border: 1px solid #eee;
      border-radius: 8px;
      font-size: 14px;
      color: #333;
      background: #fff;
  }
  .login-input-container {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 15px;
      border-bottom: 1px solid #eee;
  }
  .login-input-label {
      flex: 1;
      color: #999;
      font-size: 14px;
      text-align: left;
      direction: ltr;
  }
  .login-input-placeholder {
      flex: 2;
      text-align: right;
      color: #333;
      font-size: 14px;
      font-weight: 700;
      padding: 12px 0;
      border: none;
      background: transparent;
  }
  .login-input-group {
      border: 1px solid #ddd;
      border-radius: 10px;
      width: calc(100% - 36px);
      margin: 0 18px 25px;
      background: #fff;
      overflow: hidden;
  }

  .login-tabs-btn-green {
      width: calc(100% - 36px);
      margin: 0 18px 15px;
      padding: 16px;
      border-radius: 10px;
      background: var(--kuveyt-mid);
      color: #fff;
      font-size: 16px;
      font-weight: 700;
  }
  .login-tabs-btn-secondary {
      width: calc(100% - 36px);
      margin: 0 18px 15px;
      padding: 16px;
      border-radius: 10px;
      background: #f7f7f7;
      color: #FF7043;
      font-size: 16px;
      font-weight: 700;
      border: 1px solid #eee;
  }

  /* --- NEW: Transfer View Styles --- */
  #transfer-view {
    padding-bottom: 70px; /* لتجنب التداخل مع شريط التنقل */
  }
  .transfer-form-group {
      padding: 15px 18px;
  }
  .transfer-input-field {
      width: 100%;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-bottom: 15px;
      box-sizing: border-box;
      font-size: 1em;
      text-align: right;
  }
  .transfer-button-green {
      width: 100%;
      padding: 15px;
      background-color: var(--kuveyt-mid);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      margin-top: 10px;
  }
  /* رسالة النجاح الخضراء */
  .success-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #4CAF50; /* أخضر ساطع */
      color: white;
      padding: 25px 45px;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      display: none; /* مخفي افتراضياً */
      text-align: center;
      font-size: 1.5em;
      font-weight: bold;
      transition: opacity 0.3s;
  }
</style>
</head>
<body>

<div id="login-screen" aria-hidden="true" style="display: none;"></div>


<div id="splash-screen">
    <div class="splash-logo">
        </div>
    <div class="splash-text">
        Kuveyt Türk Mobil
    </div>
</div>
<div id="welcome-screen">
    <div class="welcome-content">
        <div style="height: 20px;"></div> 
        
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div class="welcome-logo">
                </div>
            <div style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 12px; color: #555;">TR</div>
        </div>
        
        <div class="welcome-title">
             Kuveyt Türk Mobil'e<br>Hoş Geldiniz
        </div>

        <button id="btn-show-login-tabs" class="welcome-button btn-giris">
            Giriş (تسجيل الدخول) </button>
        <button class="welcome-button btn-musteri">
            Müşteri Olmak İstiyorum
        </button>
        
        <div class="welcome-actions-grid">
            <div class="action-box">
                 <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                 Hesapla (حساب)
            </div>
            <div class="action-box">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 8V4l-8 8 8 8v-4h8V8z" fill="currentColor"/></svg>
                 fast <br> İşlemleri
            </div>
            <div class="action-box">
                 <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                 ATM / E-Dekont
            </div>
        </div>
    </div>
</div>

<div id="login-tabs-screen">
    <div class="login-tabs-header">
        <button onclick="showScreen('welcome-screen')" class="header-icon" style="color: #333;">
            <svg class="icon-svg" viewBox="0 0 24 24"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" fill="currentColor"/></svg>
        </button>
        <h2>Giriş Yap (تسجيل الدخول)</h2>
        <div></div>
    </div>

    <div class="login-tabs-container">
        <span id="tab-bireysel" class="login-tab active" data-target="bireysel">Bireysel (فردي)</span>
        <span id="tab-kurumsal" class="login-tab" data-target="kurumsal">Kurumsal (شركات)</span>
    </div>

    <div id="bireysel-content" style="width: 100%;">
        <div class="login-input-group">
            <div class="login-input-container">
                <div class="login-input-label">Müşteri No</div>
                <input id="musteri-no" type="tel" class="login-input-placeholder" value="01227043648" placeholder="Giriniz">
            </div>
            <div class="login-input-container">
                <div class="login-input-label">Şifre</div>
                <input id="sifre" type="password" class="login-input-placeholder" value="120120" placeholder="Giriniz">
            </div>
            <div class="login-input-container" style="border-bottom: none;">
                <div class="login-input-label">Kullanıcı Adı (اختياري)</div>
                <input id="kullanici-adi" type="text" class="login-input-placeholder" placeholder="Giriniz">
            </div>
        </div>
        
        <button id="manual-login-btn-tabs" class="login-tabs-btn-green">Giriş (تسجيل الدخول)</button>
        <button class="login-tabs-btn-secondary">Şifremi Unuttum / Anında Şifre</button>
        <button class="login-tabs-btn-secondary">SIM Bloke Kaldır</button>
        <button class="login-tabs-btn-secondary" onclick="showScreen('welcome-screen')">Müşteri Olmak İstiyorum</button>
    </div>

    <div id="kurumsal-content" style="display: none; width: 100%; text-align: center;">
        <h3 style="color: #007A3E; margin-top: 50px;">واجهة تسجيل دخول الشركات (Kurumsal)</h3>
        <p style="color: #555;">يرجى التبديل إلى "Bireysel" لتسجيل الدخول.</p>
    </div>

</div>


<div id="success-message" class="success-message">
    ✅ İşlem Başarılı! <br> (تم التحويل بنجاح)
</div>

<div id="app-container">
  <main id="main-content" aria-hidden="true" style="display:none;">

    <div id="home-view" class="panel-view panel-active">
        
      <div class="app-header">
        <div class="profile-section">
            <div class="profile-pic"></div>
            <span>Mostafa Barbour</span>
        </div>
        <div>
            <button class="header-icon" onclick="navigate('Search')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="currentColor"/></svg>
            </button>
            <button class="header-icon" onclick="navigate('Notifications')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6V9c0-3.1-2.03-5.87-5-6.76V2h-2v.24C8.03 3.13 6 5.9 6 9v7l-2 2v1h16v-1l-2-2z" fill="currentColor"/></svg>
            </button>
        </div>
      </div>
      
      <div class="info-bar">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M11 15h2v2h-2zm0-8h2v6h-2zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" fill="currentColor"/></svg>
          تم تحديث سعر صرف الليرة مقابل الدولار إلى **41.83**
      </div>

      <div class="primary-account-box">
        <div class="tab-bar">
            <span class="tab-item active" onclick="switchTab('My Account')">حساباتي</span>
            <span class="tab-item" onclick="switchTab('My Card')">بطاقتي</span>
        </div>
        
        <div id="my-account-tab-content">
            <div class="account-summary">
                <div class="account-header">
                    <div class="icon-text">
                        <svg class="icon-svg" viewBox="0 0 24 24" style="fill: var(--kuveyt-mid);"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 6h16v2H4V6zm0 12v-6h16v6H4z"/></svg>
                        <span>حساب - ليرة تركية</span>
                    </div>
                </div>
                
                <div class="account-balance" id="main-account-tl">₺17,640,000.00</div>
                <div class="secondary-balance-text">ما يعادل: **$<span id="balance-usd">421,706.91</span>**</div> 
            </div>
            
            <a href="#" class="view-all-link">عرض كل حساباتي</a>
        </div>
        
        <div class="card-section-wrapper" style="display:none;" id="my-card-tab-content">
            
            <h3 class="card-box-header">بطاقاتي المتوفرة</h3>
            
            <div class="card-container">
                <div class="card-title">بطاقة الائتمان (**** 5555)</div>
                <div class="card-details-row">
                    <div class="card-info-label">الحد المتاح (ل.ت)</div>
                    <div class="card-balance-tl" id="card-limit-4m">4,300,000.00 TL</div>
                </div>
                <div class="card-details-row">
                    <div class="card-info-label">القيمة التقريبية (دولار)</div>
                    <div class="card-balance-usd">$102,787.23</div>
                </div>
            </div>

            <div class="card-container" style="border: 2px solid var(--kuveyt-mid);">
                <div class="card-title" style="color: var(--kuveyt-mid);">بطاقة التوفير الممتازة (**** 4545)</div>
                <div class="card-details-row">
                    <div class="card-info-label">الرصيد المتاح (ل.ت)</div>
                    <div class="card-balance-tl" id="card-balance-1trillion">17,640,000.00 TL</div>
                </div>
                <div class="card-details-row">
                    <div class="card-info-label">القيمة التقريبية (دولار)</div>
                    <div class="card-balance-usd">$421,706.91</div>
                </div>
            </div>

            <div class="card-container">
                <div class="card-title">بطاقة Miles & Smiles (**** 4444)</div>
                <div class="card-details-row">
                    <div class="card-info-label">الحد المتاح (ل.ت)</div>
                    <div class="card-balance-tl" id="card-limit-5m">5,320,000.00 TL</div>
                </div>
                <div class="card-details-row">
                    <div class="card-info-label">القيمة التقريبية (دولار)</div>
                    <div class="card-balance-usd">$127,175.71</div>
                </div>
            </div>
            
        </div> </div>
      
      <div class="exclusive-section">
        <div class="exclusive-header">
            <span>حصري لك</span>
            <a href="#" style="font-size: 14px; font-weight: 400; color: var(--kuveyt-mid);">عرض الكل</a>
        </div>
        <div class="exclusive-card">
            <div class="card-promo-content">
                <svg class="icon-svg" viewBox="0 0 24 24" style="fill: #FFC000; width: 40px; height: 40px;"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <div class="promo-text">
                    اكسب **2500 ميل** إضافي عند إنفاقك أكثر من **₺50,000** هذا الشهر باستخدام بطاقة Miles & Smiles.
                </div>
            </div>
            <div class="promo-actions">
                <button class="btn-skip" onclick="alert('تم إخفاء العرض مؤقتاً.')">ليس مهتماً</button>
                <button class="btn-join" onclick="alert('تم تفعيل العرض بنجاح.')">انضم الآن</button>
            </div>
        </div>
      </div>

      <div class="fast-transactions-section">
        <div class="fast-transactions-header">
            <span>العمليات السريعة</span>
            <a href="#" style="font-size: 14px; font-weight: 400; color: var(--kuveyt-mid);">عرض الكل</a>
        </div>
        <div class="fast-transactions-grid">
            
            <div class="fast-transaction-item" onclick="navigate('Investment_Funds')">
                <div class="item-icon" style="background: #5D4037;">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M16 6l2.29 2.29-4.88 4.88-3.29-3.29-7.29 7.29L3 19l5.5-5.5 3.29 3.29 4.88-4.88L20 10V6z"/></svg>
                </div>
                <span>الاستثمار</span>
            </div>
            
            <div class="fast-transaction-item" onclick="navigate('School_Payments')">
                <div class="item-icon" style="background: #1976D2;">
                     <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                </div>
                <span>دفع فواتير/رسوم</span>
            </div>
            
            <div class="fast-transaction-item" onclick="navigate('Saving_Accounts')">
                <div class="item-icon" style="background: #FFC000;">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 8-3.59 8-8s-3.59-8-8-8zm1 15h-2v-6h-2V9h4v8z"/></svg>
                </div>
                <span>الادخار والتوفير</span>
            </div>
            
            <div class="fast-transaction-item" onclick="navigate('MoneyTransfer')">
                <div class="item-icon" style="background: var(--kuveyt-mid);">
                     <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 8V4l-8 8 8 8v-4h8V8z" fill="currentColor"/></svg>
                </div>
                <span>تحويل الأموال</span>
            </div>
        </div>
      </div>
      
      <div class="transactions-section">
        <h3>آخر العمليات</h3>
        
        <div class="transaction-item">
            <div class="tx-details-group">
                <div class="tx-title">شراء سيارة: BMW M340i</div>
                <div class="tx-details">وكالة السيارات - 15.08.2025 | $64,000.00</div>
            </div>
            <span class="tx-amount" style="color: #cc0000;">-₺2,107,520.00</span>
        </div>
        
        <div class="transaction-item">
            <div class="tx-details-group">
                <div class="tx-title">استثمار في صندوق (الذهب)</div>
                <div class="tx-details">شراء | 12.07.2025</div>
            </div>
            <span class="tx-amount" style="color: #cc0000;">-₺50,000.00</span>
        </div>
        
        <div class="transaction-item">
            <div class="tx-details-group">
                <div class="tx-title">تحويل خارجي (دولار أمريكي)</div>
                <div class="tx-details">مرجع: **112576960** | حساب المستلم: 8875988-1</div>
            </div>
            <span class="tx-amount" style="color: #cc0000;">-₺69,820.50</span> </div>

        <div class="transaction-item" id="ship-income-transaction" style="display:none;">
            <div class="tx-details-group">
                <div class="tx-title">دخل سفينة شحن: إيداع دوري</div>
                <div class="tx-details">دخل تلقائي | </div>
            </div>
            <span class="tx-amount" style="color: var(--kuveyt-mid);">+<span id="income-amount-display">89,000.00</span>$</span>
        </div>
        
        <div class="transaction-item">
            <div class="tx-details-group">
                <div class="tx-title">تحويل داخلي (راتب)</div>
                <div class="tx-details">من: حساب الشركة | $5,000.00</div>
            </div>
            <span class="tx-amount" style="color: var(--kuveyt-mid);">+₺209,150.00</span>
        </div>
        
        <a href="#" class="view-all-link" style="margin-top: 15px;">عرض كل العمليات</a>
      </div>
      
      <div class="private-banking-section">
          <h3>للتواصل مع ممثل البنك الخاص بك</h3>
          <div class="contact-buttons">
              <button class="contact-btn" onclick="alert('اتصال هاتفي')">
                  <svg class="icon-svg" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.34 1.02-.17 1.12.56 2.33.88 3.57.88.5 0 .9.4 1 .9V20c0 .5-.4.9-1 .9C10.74 20.9 3 13.16 3 3.5c0-.5.4-.9 1-.9h3.5c.4 0 .8.3 1 .8.1.9.3 1.9.8 2.8l-2.2 2.2z" fill="currentColor"/></svg>
              </button>
              <button class="contact-btn" onclick="alert('مكالمة فيديو')">
                   <svg class="icon-svg" viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" fill="currentColor"/></svg>
              </button>
              <button class="contact-btn" onclick="alert('رسالة نصية')">
                  <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" fill="currentColor"/></svg>
              </button>
          </div>
      </div>
    </div>
    
    <div id="transfer-view" class="panel-view">
        <div class="app-header">
            <button onclick="navigate('Home')" class="header-icon" style="color: #333;">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" fill="currentColor"/></svg>
            </button>
            <h2>Para Transferi (تحويل الأموال)</h2>
            <div></div>
        </div>

        <div class="info-bar">
            تحويل الأموال بين الحسابات المحلية أو الدولية.
        </div>
        
        <div class="transfer-form-group">
            <select class="transfer-input-field" id="transfer-account-select">
                <option value="" disabled selected>Hesap Seç (اختر حساب)</option>
                <option value="card-balance-1trillion">بطاقة التوفير الممتازة (الرصيد القابل للخصم)</option>
                <option value="card-limit-4m">بطاقة الائتمان (4,300,000.00 TL)</option>
            </select>
            
            <input type="text" class="transfer-input-field" placeholder="IBAN">
            
            <input type="number" class="transfer-input-field" id="transfer-amount-input" placeholder="Tutar (المبلغ) - بالليرة التركية">
            
            <input type="text" class="transfer-input-field" placeholder="Açıklama (الوصف)">
            
            <button class="transfer-button-green" onclick="handleTransfer()">Devam Et (استمرار)</button>
        </div>

    </div>

  </main>


  <div class="app-navbar">
    <div class="nav-item nav-item-active" id="nav-home" onclick="navigate('Home')">
      <span class="nav-icon-wrapper">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" fill="currentColor"/></svg>
      </span>
      <span>الرئيسية</span>
    </div>
    <div class="nav-item" id="nav-fx" onclick="navigate('FX')">
      <span class="nav-icon-wrapper">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M11.9 2C6.4 2 2 6.4 2 11.9s4.4 9.9 9.9 9.9 9.9-4.4 9.9-9.9S17.4 2 11.9 2zm0 18.2c-4.6 0-8.3-3.7-8.3-8.3s3.7-8.3 8.3-8.3 8.3 3.7 8.3 8.3-3.7 8.3-8.3 8.3zM13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7z" fill="currentColor"/></svg>
      </span>
      <span>صرف/استثمار</span>
    </div>
    <div class="nav-item" id="nav-status" onclick="navigate('MyStatus')">
      <span class="nav-icon-wrapper">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" fill="currentColor"/></svg>
      </span>
      <span>وضعي المالي</span>
    </div>
    <div class="nav-item" id="nav-transfer" onclick="navigate('MoneyTransfer')">
      <span class="nav-icon-wrapper">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 8V4l-8 8 8 8v-4h8V8z" fill="currentColor"/></svg>
      </span>
      <span>تحويل الأموال</span>
    </div>
    <div class="nav-item" id="nav-menu" onclick="navigate('Menu')">
      <span class="nav-icon-wrapper">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" fill="currentColor"/></svg>
      </span>
      <span>القائمة</span>
    </div>
  </div>

</div> 
<script>
const CORRECT_MUSTERI_NO = '01227043648'; // استخدمت رقم العميل هنا
const CORRECT_SIFRE = '120120'; // استخدمت كلمة السر هنا

// Element Selectors
const screens = {
    'splash-screen': document.getElementById('splash-screen'),
    'welcome-screen': document.getElementById('welcome-screen'),
    'login-tabs-screen': document.getElementById('login-tabs-screen'),
};
const mainContent = document.getElementById('main-content');
const loginTabs = document.querySelectorAll('.login-tab');
const bireyselContent = document.getElementById('bireysel-content');
const kurumsalContent = document.getElementById('kurumsal-content');
const manualLoginBtnTabs = document.getElementById('manual-login-btn-tabs');
const btnShowLoginTabs = document.getElementById('btn-show-login-tabs');


// **********************************************
// ********* متغيرات ووظائف الرصيد الوهمي *********
// **********************************************

// **التعديل هنا ليعكس 17,640,000 ل.ت**
let cardBalanceTrillionTL = 17640000.00; 

// سعر الصرف الحالي (تم استخدامه في الحسابات)
const EXCHANGE_RATE_TL_USD = 41.83; 

// مؤشر لعنصر رصيد البطاقة الثانية (القابلة للخصم)
const cardBalanceElementTrillion = document.getElementById('card-balance-1trillion');
// مؤشر لرسالة النجاح
const successMessage = document.getElementById('success-message');

// تحديث قيمة الدخل في عرض العملية لتطابق الزيادة
const incomeAmountUSD = 89000.00; // قيمة وهمية من الكود الأصلي
const incomeIntervalMS = 3600000;
const balanceElementUSD = document.getElementById('balance-usd');
const shipIncomeTransaction = document.getElementById('ship-income-transaction');
const incomeAmountDisplay = document.getElementById('income-amount-display');

// حساب الرصيد الابتدائي بالدولار بناءً على القيمة الجديدة بالليرة التركية
let userBalanceUSD = cardBalanceTrillionTL / EXCHANGE_RATE_TL_USD;

if (incomeAmountDisplay) {
    incomeAmountDisplay.textContent = incomeAmountUSD.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// دالة لتنسيق الأرقام بفاصلة الآلاف
function formatCurrency(amount) {
    if (isNaN(amount)) return '0.00';
    // التأكد من أن الرقم ليس صفراً لكي يتم عرضه
    if (amount <= 0) return '0.00'; 
    return amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// دالة لتنسيق الليرة التركية
function formatTL(amount) {
    return formatCurrency(amount) + ' TL';
}

// الدالة التي تضيف الدخل وتحدث الشاشة (للحساب الرئيسي)
function updateBalancePeriodically() {
    // تحديث رصيد الليرة التركية
    const incomeAmountTL = incomeAmountUSD * EXCHANGE_RATE_TL_USD;
    cardBalanceTrillionTL += incomeAmountTL; 
    
    // تحديث رصيد الدولار
    userBalanceUSD += incomeAmountUSD;

    if (balanceElementUSD) {
        balanceElementUSD.textContent = formatCurrency(userBalanceUSD);
    }
    
    // تحديث رصيد الحسابات المعروض
    if (cardBalanceElementTrillion) {
        cardBalanceElementTrillion.textContent = formatTL(cardBalanceTrillionTL);
        document.getElementById('main-account-tl').textContent = formatTL(cardBalanceTrillionTL);
    }

    if (shipIncomeTransaction) {
        shipIncomeTransaction.style.display = 'flex'; 
    }
    
    if (shipIncomeTransaction) {
        const dateElement = shipIncomeTransaction.querySelector('.tx-details');
        const now = new Date();
        const formattedDate = `${now.getDate().toString().padStart(2, '0')}.${(now.getMonth() + 1).toString().padStart(2, '0')}.${now.getFullYear()}`;
        dateElement.innerHTML = `دخل تلقائي | ${formattedDate} - ${now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false })}`;
    }

    console.log(`[INCOME] Added $${formatCurrency(incomeAmountUSD)}. New balance: $${formatCurrency(userBalanceUSD)}`);
}

// دالة التحويل الوهمية (المطلوبة)
function handleTransfer() {
    const selectedAccountID = document.getElementById('transfer-account-select').value;
    const amountInput = document.getElementById('transfer-amount-input').value;
    const amount = parseFloat(amountInput);

    // 1. التحقق من الإدخال
    if (!selectedAccountID || amount <= 0 || isNaN(amount)) {
        alert("الرجاء اختيار الحساب وإدخال مبلغ صحيح للتحويل.");
        return;
    }

    // 2. التحقق من أن الحساب هو القابل للخصم (البطاقة الممتازة)
    if (selectedAccountID !== 'card-balance-1trillion') {
        alert("هذا نموذج. يرجى اختيار 'بطاقة التوفير الممتازة' لتتمكن من خصم الرصيد.");
        return;
    }
    
    
    // 3. الخصم الوهمي من المتغير الرئيسي
    if (cardBalanceTrillionTL < amount) {
        alert("الرصيد غير كافٍ لإجراء هذا التحويل.");
        return;
    }

    cardBalanceTrillionTL -= amount;
    
    // تحديث رصيد الدولار المقابل
    userBalanceUSD = cardBalanceTrillionTL / EXCHANGE_RATE_TL_USD;
    
    // 4. تحديث الرصيد المعروض
    document.getElementById(selectedAccountID).textContent = formatTL(cardBalanceTrillionTL);
    document.getElementById('main-account-tl').textContent = formatTL(cardBalanceTrillionTL);
    document.getElementById('balance-usd').textContent = formatCurrency(userBalanceUSD);

    // تحديث قيمة الدولار المقابلة للبطاقة الممتازة
    const cardBalanceUSDElement = document.querySelector('#my-card-tab-content .card-container[style*="border: 2px solid var(--kuveyt-mid)"] .card-balance-usd');
    if (cardBalanceUSDElement) {
        cardBalanceUSDElement.textContent = '$' + formatCurrency(userBalanceUSD);
    }

    
    // 5. إظهار رسالة النجاح الخضراء
    successMessage.style.display = 'block';

    // 6. إخفاء رسالة النجاح والعودة لصفحة البطاقات بعد 3 ثوانٍ
    setTimeout(() => {
        successMessage.style.display = 'none';
        navigate('Home'); 
        // التأكد من تفعيل أيقونة الصفحة الرئيسية
        document.getElementById('nav-home').classList.add('nav-item-active');
        document.getElementById('nav-transfer').classList.remove('nav-item-active');
        
        // ** الرسالة التي يمكن استخدامها في السكرين شوت **
        console.log(`\n\nإشعار التحويل:\n------------------\nالعملية: تحويل بنكي ناجح\nالمبلغ المحول: -₺${formatCurrency(amount)}\nالرصيد الجديد: ₺${formatCurrency(cardBalanceTrillionTL)}\n------------------\n\n`);
    }, 3000);
}


// **********************************************
// ********* نهاية متغيرات ووظائف الرصيد الوهمي *********
// **********************************************


// --- SCREEN NAVIGATION ---

function showScreen(screenId) {
    // إخفاء جميع الشاشات أولاً
    Object.values(screens).forEach(screen => screen.style.display = 'none');
    mainContent.style.display = 'none';

    // عرض الشاشة المطلوبة
    if (screens[screenId]) {
        screens[screenId].style.display = 'flex';
        // إعادة تعيين الشفافية لشاشة البداية للتأكد من أنها تظهر بشكل صحيح
        if (screenId === 'splash-screen') {
             screens[screenId].classList.remove('fade-out'); // إزالة فئة الاختفاء
             screens[screenId].style.opacity = '1';
        }
    } else if (screenId === 'main') {
        mainContent.style.display = 'block';
        navigate('Home'); 
    }
}

// ** الدالة المسؤولة عن ظهور شاشة البداية واختفائها **
function showSplashBeforeMain() {
    showScreen('splash-screen');
    
    // زمن ظهور الشعار ثابتًا (2000ms = 2 ثانية)
    const splashDisplayDuration = 2000;
    // زمن حركة الاختفاء (500ms = 0.5 ثانية - يطابق CSS transition)
    const fadeOutDuration = 500; 
    
    // 1. الانتظار لمدة ظهور الشعار
    setTimeout(() => {
        // 2. إضافة الفئة "fade-out" لبدء تأثير التلاشي التدريجي
        screens['splash-screen'].classList.add('fade-out'); 
        
        // 3. الانتظار حتى اكتمال التلاشي (0.5 ثانية)
        setTimeout(() => {
            // 4. إخفاء شاشة البداية نهائيًا وعرض المحتوى الرئيسي
            screens['splash-screen'].style.display = 'none'; 
            showScreen('main'); // عرض المحتوى الرئيسي
            
            // ********* بدء وظيفة الدخل بعد تسجيل الدخول *********
            updateBalancePeriodically(); 
            setInterval(updateBalancePeriodically, incomeIntervalMS);
            
        }, fadeOutDuration); 
        
    }, splashDisplayDuration); 
}


// --- LOGIN LOGIC ---

function handleTabSwitch(event) {
    const target = event.target.dataset.target;

    loginTabs.forEach(tab => tab.classList.remove('active'));
    event.target.classList.add('active');

    bireyselContent.style.display = 'none';
    kurumsalContent.style.display = 'none';

    if (target === 'bireysel') {
        bireyselContent.style.display = 'block';
    } else if (target === 'kurumsal') {
        kurumsalContent.style.display = 'block';
    }
}

function handleLoginAttempt() {
    const musteriNo = document.getElementById('musteri-no').value.trim();
    const sifre = document.getElementById('sifre').value.trim();

    if (musteriNo === CORRECT_MUSTERI_NO && sifre === CORRECT_SIFRE) {
        showSplashBeforeMain();
    } else {
        alert('بيانات الدخول غير صحيحة. يرجى التأكد من رقم العميل وكلمة السر.\nللتجربة: 01227043648 | 120120');
    }
}


// --- NAVIGATION FOR MAIN CONTENT (Kept from previous code) ---

// إضافة واجهة التحويل إلى قائمة العرض
const views = {
    'Home': document.getElementById('home-view'),
    'MoneyTransfer': document.getElementById('transfer-view'), // تم إضافة الواجهة الجديدة هنا
};

const navItems = document.querySelectorAll('.app-navbar .nav-item');

function switchTab(tabName) {
    const tabs = document.querySelectorAll('.tab-item');
    tabs.forEach(tab => tab.classList.remove('active'));

    const accountContent = document.getElementById('my-account-tab-content');
    const cardContent = document.getElementById('my-card-tab-content');
    
    if (tabName === 'My Account') {
        document.querySelector('.tab-bar .tab-item:nth-child(1)').classList.add('active');
        accountContent.style.display = 'block';
        cardContent.style.display = 'none';
    } else if (tabName === 'My Card') {
        document.querySelector('.tab-bar .tab-item:nth-child(2)').classList.add('active');
        accountContent.style.display = 'none';
        cardContent.style.display = 'block';
    }
}


function navigate(page) {
    // إخفاء كل الـ views
    Object.values(views).forEach(view => view.classList.remove('panel-active'));

    // تحديث أيقونة شريط التنقل
    navItems.forEach((item, index) => {
        item.classList.remove('nav-item-active'); 
        if (item.getAttribute('onclick').includes(`'${page}'`)) {
             item.classList.add('nav-item-active');
        }
    });

    if (views[page]) {
        views[page].classList.add('panel-active');
        
        // إذا كنا في صفحة Home، نتأكد من تفعيل التبويب الصحيح
        if (page === 'Home') {
            switchTab('My Account'); 
        }

    } else {
        // إذا لم يكن view حقيقي، نرجع للصفحة الرئيسية
        if (page !== 'Menu' && page !== 'FX' && page !== 'MyStatus') {
            alert('انتقال وهمي إلى: ' + page.replace(/_/g, ' '));
        }
        // نبقي الـ panel-active على آخر عنصر فعال (في هذه الحالة home)
        document.getElementById('home-view').classList.add('panel-active');
        document.getElementById('nav-home').classList.add('nav-item-active');
    }
}


// --- EVENT LISTENERS AND INITIALIZATION ---

btnShowLoginTabs.onclick = () => showScreen('login-tabs-screen');
loginTabs.forEach(tab => {
    tab.onclick = handleTabSwitch;
});
manualLoginBtnTabs.onclick = handleLoginAttempt;


// --- INITIALIZATION ON LOAD ---

window.addEventListener('load', () => {
    const oldLoginScreen = document.getElementById('login-screen');
    if (oldLoginScreen) oldLoginScreen.style.display = 'none';

    showScreen('welcome-screen');
    
    bireyselContent.style.display = 'block';
    kurumsalContent.style.display = 'none';

    // تهيئة الرصيد بالدولار و الليرة التركية عند التحميل
    if (balanceElementUSD) {
        balanceElementUSD.textContent = formatCurrency(userBalanceUSD);
    }
    if (cardBalanceElementTrillion) {
        cardBalanceElementTrillion.textContent = formatTL(cardBalanceTrillionTL);
    }
    
    // إخفاء كل الـ views الأخرى في البداية
    Object.values(views).forEach(view => view.classList.remove('panel-active'));
});
</script>
</body>
</html>
